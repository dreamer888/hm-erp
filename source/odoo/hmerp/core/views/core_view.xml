<?xml version="1.0"?>
<openerp>
	<data>

		<!--原生应用的 应用 和 设置 菜单调到后面，让gooderp菜单集中在一起-->
		<menuitem id='base.menu_management' name='应用' sequence='9997'/>
		<menuitem id='base.menu_administration' name='设置' sequence='9998'/>

		<!--根菜单-->
		<menuitem id='setting_menu' name='配置' groups="core.master_groups" web_icon="core,static/description/icon.png" sequence='9999'/>
		<menuitem id='config_data_menu' name='基本配置' parent='setting_menu' sequence='20'/>
		<menuitem id='system_menu' name='高级配置' parent='setting_menu' sequence='30'/>

		<!--类别-->
		<record id="core_category_tree" model="ir.ui.view">
			<field name="name">core.category.tree</field>
			<field name="model">core.category</field>
			<field name="arch" type="xml">
				<tree editable="top" string="类别">
					<field name="name"/>
					<field name="type"/>
					<field name="active"/>
				</tree>
			</field>
		</record>
		<record id="core_category_form" model="ir.ui.view">
			<field name="name">core.category.form</field>
			<field name="model">core.category</field>
			<field name="arch" type="xml">
				<form string="类别">
					<group>
						<group>
							<field name="name"/>
							<field name="type" invisible="context.get('type', 0)"/>
						</group>
						<group>
							<field name="note"/>
						</group>
					</group>
				</form>
			</field>
		</record>
		<record id="core_category_search" model="ir.ui.view">
            <field name="name">core.category.search</field>
            <field name="model">core.category</field>
            <field name="arch" type="xml">
                <search string="类别">
                    <field name="name"/>
                    <field name="type"/>
					<searchpanel>
						<field name='type'/>
					</searchpanel>
                    <separator/>
                    <group expand="0" string="分组">
                        <filter name="by_type" string="类型" domain="[]" context="{'group_by':'type'}"/>
                    </group>
                </search>
            </field>
        </record>
		<record id="core_category_action" model="ir.actions.act_window">
			<field name="name">类别</field>
			<field name="res_model">core.category</field>
			<field name="type">ir.actions.act_window</field>
			<field name="view_mode">tree</field>
			<field name="search_view_id" ref="core_category_search"/>
		</record>
		<menuitem id='core_category_menu' name='类别' action='core_category_action' parent='config_data_menu' sequence='2'/>

		<!--可选值-->
		<record id="core_value_tree" model="ir.ui.view">
			<field name="name">core.value.tree</field>
			<field name="model">core.value</field>
			<field name="arch" type="xml">
				<tree editable="top" string="可选值">
					<field name="name"/>
					<field name="type"/>
					<field name="parent_id"/>
					<field name="note" groups="base.group_no_one"/>
					<field name='active'  invisible='1'/>
				</tree>
			</field>
		</record>
		<record id="core_value_form" model="ir.ui.view">
			<field name="name">core.value.form</field>
			<field name="model">core.value</field>
			<field name="arch" type="xml">
				<form string="可选值">
					<group>
						<field name="name"/>
						<field name="note"/>
						<field name="type" invisible="1"/>
					</group>
				</form>
			</field>
		</record>
		<record id="core_value_search" model="ir.ui.view">
            <field name="name">core.value.search</field>
            <field name="model">core.value</field>
            <field name="arch" type="xml">
                <search string="可选值">
                    <field name="name"/>
                    <field name="type"/>
                    <separator/>
                    <group expand="0" string="分组">
                        <filter name="by_type" string="类型" domain="[]" context="{'group_by':'type'}"/>
                    </group>
                </search>
            </field>
        </record>
		<record id="core_value_action" model="ir.actions.act_window">
			<field name="name">可选值</field>
			<field name="res_model">core.value</field>
			<field name="type">ir.actions.act_window</field>
			
			<field name="view_mode">tree</field>
			<field name="search_view_id" ref="core_value_search"/>
		</record>
		<menuitem id='core_value_menu' name='可选值' action='core_value_action' parent='config_data_menu' sequence='3'/>

		<!--公司-->
		<record id="company_form" model="ir.ui.view">
			<field name="name">company.form</field>
			<field name="model">res.company</field>
			<field name="inherit_id" ref="base.view_company_form" />
            <field name="arch" type="xml">
			   <xpath expr="//form" position="attributes">
			       <attribute name="create">0</attribute>
			   </xpath>
               <xpath expr="//notebook" position="inside">
                    <page name="account" string="会计属性">
						<group>
					  		<group>
								<field name="start_date" groups="base.group_no_one" />
								<field name="cost_method"/>
								<field name="draft_invoice"/>
								<field name="bank_account_id"/>
					  		</group>
					  		<group>
					    		<field name="import_tax_rate"/>
								<field name="output_tax_rate"/>
								<field name='sign' widget="image" class="oe_avatar oe_left"/>
					  		</group>
					  	</group>
				    </page>
				</xpath>
			</field>
		</record>
		<record id="company_action" model="ir.actions.act_window">
			<field name="name">公司</field>
			<field name="res_model">res.company</field>
			<field name="type">ir.actions.act_window</field>
			
			<field name="view_mode">form</field>
			<field name="res_id">1</field>
		</record>
		<record id="company_action_view_form" model="ir.actions.act_window.view">
			<field name="view_mode">form</field>
			<field name="view_id" ref="company_form"/>
			<field name="act_window_id" ref="company_action"/>
		</record>
		<menuitem id='company_menu' name='公司' action='company_action' parent='system_menu' sequence='10'/>
		<!--单位，菜单放在仓库模块下-->
		<record id="uom_tree" model="ir.ui.view">
			<field name="name">uom.tree</field>
			<field name="model">uom</field>
			<field name="arch" type="xml">
				<tree editable="top" string="单位">
					<field name="name"/>
					<field name='active'  invisible='1'/>
				</tree>
			</field>
		</record>
		<record id="uom_search" model="ir.ui.view">
            <field name="name">uom.search</field>
            <field name="model">uom</field>
            <field name="arch" type="xml">
                <search string="单位">
                    <field name="name"/>
                </search>
            </field>
        </record>
		<record id="uom_action" model="ir.actions.act_window">
			<field name="name">单位</field>
			<field name="res_model">uom</field>
			<field name="type">ir.actions.act_window</field>
			
			<field name="view_mode">tree</field>
		</record>
		<!--结算方式，菜单放在资金模块下-->
		<record id="settle_mode_tree" model="ir.ui.view">
			<field name="name">settle.mode.tree</field>
			<field name="model">settle.mode</field>
			<field name="arch" type="xml">
				<tree editable="top" string="结算方式">
					<field name="name"/>
					<field name='active'  invisible='1'/>
				</tree>
			</field>
		</record>
		<record id="settle_mode_search" model="ir.ui.view">
            <field name="name">settle.mode.search</field>
            <field name="model">settle.mode</field>
            <field name="arch" type="xml">
                <search string="结算方式">
                    <field name="name"/>
                </search>
            </field>
        </record>
		<record id="settle_mode_action" model="ir.actions.act_window">
			<field name="name">结算方式</field>
			<field name="res_model">settle.mode</field>
			<field name="type">ir.actions.act_window</field>
			
			<field name="view_mode">tree</field>
		</record>
		<!--客户， 菜单放在资金和销售模块下-->
		<record id="customer_address_form" model="ir.ui.view">
			<field name="name">customer.address.form</field>
			<field name="model">partner</field>
			<field name="arch" type="xml">
				<form string="客户">
					<sheet>
						<div class="oe_title">
							<h1>
								<field name="name" placeholder="客户名称" required="1"/>
							</h1>
						</div>
						<group>
							<group string="基本信息">
								<field name="main_mobile"/>
								<field name="main_contact"/>
								<field name="date_qualify" invisible='1'/>
								<field name="days_qualify" invisible='1'/>
							</group>
							<group string="管理信息">
								<field name="code"/>
								<field name="priority" widget="priority"/>
								<field name="c_category_id" required="1"/>
								<field name="responsible_id"/>
								<field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color'}"/>
							</group>
						</group>
						<notebook>
						    <page name='fin' string="财务信息">
							   <group>
								<group string="开票信息">
									<field name="tax_rate"/>
									<field name="bank_name"/>
									<field name="bank_num"/>
									<field name="main_address"/>
									<field name="tax_num"/>
								</group>
								<group string="往来信息">
									<field name="pay_method" required="1" options="{'no_open': True, 'no_create': True}"/>
									<field name="receivable"/>
									<field name="credit_limit"/>
									<field name="recon_day"/>
								</group>
							   </group>
							</page>
							<page name="other" string='其他信息'>
							    <group>
								  <group string="备注">
									<field name="note" placeholder="暂无备注信息"/>
									<field name="s_category_id" placeholder="转为供应商"/>
								  </group>
								  <group string="其他">
									<field name="share_id"/>
									<field name="channel_id" placeholder="来源渠道"/>
									<field name="source" placeholder="具体来源"/>
								  </group>
								</group>
							</page>
						</notebook>
					</sheet>
					<div class="oe_chatter">
						 <field name="message_follower_ids" widget="mail_followers"/>
						 <field name="message_ids" widget="mail_thread"/>
                 	</div>
				</form>
			</field>
		</record>
		<record id="customer_tree" model="ir.ui.view">
			<field name="name">客户列表</field>
			<field name="model">partner</field>
			<field name="arch" type="xml">
				<tree string="客户">
					<field name="code"/>
					<field name="name"/>
					<field name="c_category_id"/>
					<field name="priority"/>
					<field name="main_mobile"/>
					<field name='active'  invisible='1'/>
					<field name="receivable" sum='sum'/>
				</tree>
			</field>
		</record>
		<record id="customer_search" model="ir.ui.view">
            <field name="name">customer.search</field>
            <field name="model">partner</field>
            <field name="arch" type="xml">
                <search string="客户">
                    <field name="name"/>
                    <field name="code"/>
                    <field name="c_category_id"/>
                    <field name="main_mobile"/>
                    <field name="receivable"/>
					<searchpanel>
						<field name='responsible_id'/>
					</searchpanel>
                    <group expand="0" string="分组">
                        <filter name="by_category" string="客户类别" domain="[]" context="{'group_by':'c_category_id'}"/>
                    </group>
                </search>
            </field>
        </record>
		<record id="customer_action" model="ir.actions.act_window">
			<field name="name">客户</field>
			<field name="res_model">partner</field>
			<field name="type">ir.actions.act_window</field>
			
			<field name="view_mode">tree,form</field>
			<field name="search_view_id" ref="customer_search"/>
			<field name="domain">[('c_category_id','!=',False)]</field>
		</record>
		<record id="customer_address_action_tree" model="ir.actions.act_window.view">
			<field eval="1" name="sequence"/>
			<field name="view_mode">tree</field>
			<field name="view_id" ref="customer_tree"/>
			<field name="act_window_id" ref="customer_action"/>
		</record>
		<record id="customer_address_action_form" model="ir.actions.act_window.view">
			<field eval="2" name="sequence"/>
			<field name="view_mode">form</field>
			<field name="view_id" ref="customer_address_form"/>
			<field name="act_window_id" ref="customer_action"/>
		</record>
		<!--供应商 菜单放在采购模块下-->
		<record id="supplier_address_form" model="ir.ui.view">
			<field name="name">supplier.address.form</field>
			<field name="model">partner</field>
			<field name="arch" type="xml">
				<form string="供应商">
					<sheet>
						<div class="oe_title">
							<h1>
								<field name="name" placeholder="供应商名称" required="1"/>
							</h1>
						</div>
						<group>
							<group string="基本信息">
								<field name="main_mobile"/>
								<field name="main_contact"/>
							</group>
							<group string="管理信息">
								<field name="code"/>
								<field name='supp_priority' widget='priority'/>
								<field name="s_category_id" required="1"/>
								<field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color'}"/>
							</group>
						</group>
						<notebook>
						    <page name='fin' string="财务信息">
							  <group>
								<group string="开票信息">
									<field name="tax_rate"/>
									<field name="bank_name"/>
									<field name="bank_num"/>
									<field name="main_address"/>
									<field name="tax_num"/>
								</group>
								<group string="往来信息">
									<field name="pay_method" options="{'no_open': True, 'no_create': True}"/>
								    <field name="payable"/>
									<field name="recon_day"/>
								</group>
							   </group>
							</page>
							<page string='其他信息'>
							    <group>
								  <group string="备注">
									<field name="note" placeholder="暂无备注信息"/>
						            <field name="c_category_id" placeholder="转为客户"/>
								  </group>
								  <group string="其他">
								  </group>
								</group>
							</page>
						</notebook>    
					</sheet>
					<div class="oe_chatter">
                         <field name="message_follower_ids" widget="mail_followers"/>
                         <field name="message_ids" widget="mail_thread"/>
                    </div>
				</form>
			</field>
		</record>
		<record id="vendor_tree" model="ir.ui.view">
			<field name="name">供应商列表</field>
			<field name="model">partner</field>
			<field name="arch" type="xml">
				<tree string="供应商">
					<field name="s_category_id" required="1"/>
					<field name="code"/>
					<field name="main_mobile"/>
					<field name='active' invisible='1'/>
					<field name="name"/>
					<field name="payable" sum='sum'/>
				</tree>
			</field>
		</record>
		<record id="vendor_search" model="ir.ui.view">
            <field name="name">vendor.search</field>
            <field name="model">partner</field>
            <field name="arch" type="xml">
                <search string="供应商">
                    <field name="name"/>
                    <field name="code"/>
                    <field name="s_category_id"/>
                    <field name="main_mobile"/>
                    <field name="payable"/>
					<searchpanel>
						<field name='supp_priority'/>
					</searchpanel>
                    <group expand="0" string="分组">
                        <filter name="by_category" string="供应商类别" domain="[]" context="{'group_by':'s_category_id'}"/>
                    </group>
                </search>
            </field>
        </record>
		<record id="vendor_action" model="ir.actions.act_window">
			<field name="name">供应商</field>
			<field name="res_model">partner</field>
			<field name="type">ir.actions.act_window</field>
			
			<field name="view_mode">tree,form</field>
			<field name="search_view_id" ref="vendor_search"/>
			<field name="domain">[('s_category_id','!=',False)]</field>
		</record>
		<record id="supplier_address_action_tree" model="ir.actions.act_window.view">
			<field eval="1" name="sequence"/>
			<field name="view_mode">tree</field>
			<field name="view_id" ref="vendor_tree"/>
			<field name="act_window_id" ref="vendor_action"/>
		</record>
		<record id="supplier_address_action_form" model="ir.actions.act_window.view">
			<field eval="2" name="sequence"/>
			<field name="view_mode">form</field>
			<field name="view_id" ref="supplier_address_form"/>
			<field name="act_window_id" ref="vendor_action"/>
		</record>
		<!--用户-->
		<menuitem id='users_menu' name="用户" action='base.action_res_users' parent='config_data_menu' sequence='1' groups="base.group_erp_manager"/>
		<!--账户，菜单放在资金模块下-->
		<record id="bank_account_tree" model="ir.ui.view">
			<field name="name">bank.account.tree</field>
			<field name="model">bank.account</field>
			<field name="arch" type="xml">
				<tree editable="top" string="账户">
					<field name="name"/>
					<field name="num"/>
					<field name="balance" sum='sum'/>
				    <field name='active' invisible='1'/>
				</tree>
			</field>
		</record>
		<record id="bank_account_search" model="ir.ui.view">
            <field name="name">bank.account.search</field>
            <field name="model">bank.account</field>
            <field name="arch" type="xml">
                <search string="账户">
                    <field name="name"/>
					<field name="num"/>
                </search>
            </field>
        </record>
		<record id="bank_account_action" model="ir.actions.act_window">
			<field name="name">账户</field>
			<field name="res_model">bank.account</field>
			<field name="type">ir.actions.act_window</field>
			
			<field name="view_mode">tree</field>
		</record>

		<!--收支项，菜单放在资金模块下-->
		<record id="service_tree" model="ir.ui.view">
			<field name="name">收支项列表</field>
			<field name="model">service</field>
			<field name="arch" type="xml">
				<tree string="收支项">
					<field name="name"/>
					<field name="get_categ_id"/>
					<field name="pay_categ_id"/>
					<field name="price"/>
                    <field name='active' invisible='1'/>					
				</tree>
			</field>
		</record>
		<record id="service_form" model="ir.ui.view">
			<field name="name">收支项</field>
			<field name="model">service</field>
			<field name="arch" type="xml">
				<form string="Service">
					<group>
						<group>
							<field name="name"/>
							<field name="price"/>
							<field name="tax_rate"/>
						</group>
						<group>
							<field name="get_categ_id"/>
							<field name="pay_categ_id"/>
						</group>
					</group>
				</form>
			</field>
		</record>
		<record id="service_search" model="ir.ui.view">
            <field name="name">service.search</field>
            <field name="model">service</field>
            <field name="arch" type="xml">
                <search string="收支项">
                    <field name="name"/>
                    <field name="get_categ_id"/>
                    <field name="pay_categ_id"/>
                    <group expand="0" string="分组">
                        <filter name="by_get_category" string="收入类别" domain="[]" context="{'group_by':'get_categ_id'}"/>
                        <filter name="by_pay_category" string="支出类别" domain="[]" context="{'group_by':'pay_categ_id'}"/>
                    </group>
                </search>
            </field>
        </record>
		<record id="service_action" model="ir.actions.act_window">
			<field name="name">收支项</field>
			<field name="res_model">service</field>
			
			<field name="view_mode">tree,form</field>
			<field name="search_view_id" ref="service_search"/>
		</record>

        <!-- 继承 res.users form -->
        <record id='res_users_form_inherit' model='ir.ui.view'>
            <field name='name'>res users form inherit</field>
            <field name='model'>res.users</field>
             <field name="inherit_id" ref="base.view_users_form"/>
            <field name='arch' type='xml'>
				<xpath expr="//label[@for='login']" position='attributes'>
                    <attribute name='string'>用户</attribute>
                </xpath>
				<field name='action_id' position='after'>
				    <field name="team_id"/>
				</field>
            </field>
        </record>
        <!-- 继承res.users tree -->
        <record id='res_users_tree_inherit' model='ir.ui.view'>
            <field name='name'>res users tree inherit</field>
            <field name='model'>res.users</field>
             <field name="inherit_id" ref="base.view_users_tree"/>
            <field name='arch' type='xml'>
                <field name='login' position='attributes'>
                    <attribute name='string'>用户</attribute>
                </field>
            </field>
        </record>

        <!-- 用于清理业务数据 -->
		<record id="business_data_table_tree" model="ir.ui.view">
			<field name="name">business.data.table.tree</field>
			<field name="model">business.data.table</field>
			<field name="arch" type="xml">
				<tree editable="top" string="业务数据表">
				    <field name="model"/>
					<field name="name"/>
				</tree>
			</field>
		</record>
		<record id="action_business_data_table" model="ir.actions.act_window">
			<field name="name">业务数据表名</field>
			<field name="res_model">business.data.table</field>
			<field name="type">ir.actions.act_window</field>
			
			<field name="view_mode">tree</field>
		</record>
		<menuitem id='menu_business_data' name='清空业务数据' parent='base.menu_custom' sequence='60'/>
		<menuitem id='menu_business_data_table' name='业务数据表名' action='action_business_data_table' parent='menu_business_data' sequence='2'/>

		<record id="clean_business_data_form" model="ir.ui.view">
			<field name="name">清空业务数据向导</field>
			<field name="model">clean.business.data</field>
			<field name="arch" type="xml">
				<form string="Service">
					<header>
						<h2 style="color:red">数据清理后不能恢复，请先备份再进行操作！</h2>
					</header>
					<group>
						<field name="need_clean_table" widget="many2many_tags" options="{'color':'random','no_create':True}"/>
					</group>
					<footer>
						<button name="remove_data"  string="清除业务数据" type="object" class="oe_highlight"/>
                        或者
                        <button string="取消" class="oe_link" special="cancel"/>
					</footer>
				</form>
			</field>
		</record>

		<record id="action_clean_business_data" model="ir.actions.act_window">
			<field name="name">清空业务数据表</field>
			<field name="res_model">clean.business.data</field>
			<field name="type">ir.actions.act_window</field>
			
			<field name="view_mode">form</field>
			<field name="target">new</field>
		</record>
		<menuitem id='menu_clean_business_data' name='清理业务数据表' action='action_clean_business_data' parent='base.menu_custom' sequence='70'/>

		<record id="action_open_module_extra_better" model="ir.actions.client">
			<field name="name">项目首页</field>
			<field name="tag">better.list</field>
		</record>

        <!-- 用权限组来隐藏系统自带的根菜单 -->
		<record model="ir.ui.menu" id="base.menu_administration">
            <field name="groups_id" eval="[(3, ref('base.group_erp_manager'))]"/>
        </record>
		<!-- home page not working yet
		<menuitem id="home_page.main_home_menu" name="首页" groups="core.group_all_manager"/>
		-->
		<menuitem id="mail.menu_root_discuss" name="消息" groups="-base.group_user,core.group_mail" />
		<menuitem id="base.module_mi"  groups="-base.group_no_one,core.nobody_can_see" />
		<menuitem id="base.menu_module_updates"  sequence="20"  groups="-base.group_no_one,core.nobody_can_see" parent="base.menu_management"  />
		<menuitem  id="base.menu_view_base_module_update" name="更新应用列表" groups="-base.group_no_one"  parent="base.menu_management" />
		<menuitem  id="base.menu_view_base_module_upgrade"  name="执行已经安排的升级" groups="base.group_no_one" parent="base.menu_management" />
		<!--<menuitem id="menu_module_extra_better" parent="base.menu_management" name="项目首页" sequence="6" action="action_open_module_extra_better" />-->


	</data>
</openerp>
