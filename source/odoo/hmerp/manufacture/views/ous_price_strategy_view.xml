<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id='ous_price_strategy_tree_view' model='ir.ui.view'>
        <field name='name'>工序委外价格策略</field>
        <field name='model'>ous.price.strategy</field>
        <field name='arch' type='xml'>
            <tree editable='bottom'>
                <field name='partner_id' domain="[('s_category_id', '!=', False)]" context="{'form_view_ref': 'core.supplier_address_form'}"/>
                <field name='goods_id' />
                <field name='bom_id' />
                <field name='uom_id'/>
                <field name="mrp_proc_ids" invisible="1"/>
                <field name='mrp_proc_id'/>
                <field name='name'/>
                <field name='qty_start' />
                <field name='qty_end' />
                <field name='price' />
                <field name='price_taxed' />
                <field name='discount_rate'/>
                <field name='start_date' />
                <field name='end_date'/>
                <field name='enabled'/>
            </tree>
        </field>
    </record>
    <record id="ous_price_strategy_action" model="ir.actions.act_window">
            <field name="name">工序委外价格策略</field>
            <field name="res_model">ous.price.strategy</field>
            <field name="view_id" ref='ous_price_strategy_tree_view'/>
            <field name="context">{'search_default_valid':1}</field>
            <field name="view_mode">tree</field>
    </record>
    <record id="ous_price_strategy_search" model="ir.ui.view">
        <field name="name">ous.price.strategy.search</field>
        <field name="model">ous.price.strategy</field>
        <field name="arch" type="xml">
            <search string='工序委外价格策略搜索视图'>
                <field name="goods_id" filter_domain="[('goods_id.name', 'ilike', self), ('goods_id.describe', 'ilike', self)]"/>
                <field name='mrp_proc_id'/>
                <field name='end_date'/>
                <filter name="valid" string="有效" 
                    domain="[('start_date','&lt;=', context_today().strftime('%Y-%m-%d')), ('enabled', '=', True),'|' ,('end_date','&gt;=', context_today().strftime('%Y-%m-%d')), ('end_date', '=', False)]"/>
                <searchpanel>
                    <field name="partner_id"/>
                </searchpanel>
            </search>
        </field>
    </record>
</odoo>